---
title: Python Library
---
The Shellviz Python library provides powerful data visualization capabilities for Python scripts and applications. It creates a local web server that can receive and visualize data, making it perfect for data analysis, debugging, and monitoring applications.

## Installation

Install Shellviz with pip:
```bash
pip install shellviz
```

For QR code support (optional):
```bash
pip install shellviz qrcode
```

## Quick Start

### Basic Usage
```python
from shellviz import log, table, json

# Start logging data
log('my first shellviz command')
# Shellviz serving on http://127.0.0.1:5544

# Display tabular data
table([("Alice", 25, 5.6), ("Bob", 30, 5.9), ("Charlie", 22, 5.7)])

# Show JSON data
json({"name": "Alice", "age": 25, "height": 5.6})
```

### Custom Instance
```python
from shellviz import Shellviz

# Create custom instance
sv = Shellviz(port=3333, show_url=False)
sv.log('Custom instance message')
sv.table([('Name', 'Value'), ('Custom', 123)])
```

## Core Functions

### Data Visualization Functions

#### `log(*data, id=None)`
Display log messages with timestamps
```python
log('Simple message')
log('Error occurred:', error_msg, id='errors')
log('Multiple', 'values', 'supported')

# Logs automatically append by default
log('First message', id='process')
log('Second message', id='process')  # Appends to 'process' log
```

#### `table(data, id=None, append=False)`
Display tabular data
```python
# List of tuples/lists
table([('Name', 'Age'), ('Alice', 30), ('Bob', 25)])

# Single row (automatically wrapped)
table(['Alice', 30, 'Engineer'])

# Update existing table
table([('Charlie', 28)], id='users', append=True)

# Django QuerySet support
from myapp.models import User
table(User.objects.all(), id='all_users')
```

#### `json(data, id=None, append=False)`
Display JSON data with interactive explorer
```python
json({'user': 'alice', 'preferences': {'theme': 'dark'}})
json([1, 2, 3, 4, 5])
json({'timestamp': time.time()}, id='status')

# Django Model support
json(request.user, id='current_user')
```

#### `markdown(text, id=None, append=False)`
Render markdown content
```python
markdown('# Welcome to Shellviz\n\nThis is **bold** text.')
markdown('''
## Status Report
- Task 1: ✅ Complete  
- Task 2: ⏳ In Progress
- Task 3: ❌ Failed
''')
```

#### `progress(value, id=None, append=False)`
Show progress bars (0.0 to 1.0)
```python
progress(0.0, id='migration')
# ... do work ...
progress(0.5, id='migration')
# ... do more work ...
progress(1.0, id='migration')
```

#### `number(value, id=None, append=False)`
Display large numbers with formatting
```python
number(42)
number(1337, id='score')
number(999999, id='total_users')
```

#### `card(data, id=None, append=False)`
Display card-style information
```python
card({'title': 'Server Status', 'value': 'Online', 'color': 'green'})
card('Quick info message')
card({'user_count': 1234, 'active_sessions': 56})
```

### Chart Functions

#### `bar(data, id=None, append=False)`
Create bar charts
```python
bar([
    {'name': 'Jan', 'value': 100},
    {'name': 'Feb', 'value': 150},
    {'name': 'Mar', 'value': 200}
])
```

#### `area(data, id=None, append=False)`
Create area charts
```python
area([
    {'x': '2024-01', 'y': 100},
    {'x': '2024-02', 'y': 150},
    {'x': '2024-03', 'y': 200}
])
```

#### `pie(data, id=None, append=False)`
Create pie charts
```python
pie([
    {'name': 'Desktop', 'value': 45},
    {'name': 'Mobile', 'value': 35},
    {'name': 'Tablet', 'value': 20}
])
```

### Utility Functions

#### `location(coordinates, id=None, append=False)`
Display location data on maps
```python
location({'lat': 40.7128, 'lng': -74.0060, 'name': 'New York City'})
location([
    {'lat': 37.7749, 'lng': -122.4194, 'name': 'San Francisco'},
    {'lat': 34.0522, 'lng': -118.2437, 'name': 'Los Angeles'}
])
```

#### `raw(data, id=None, append=False)`
Display raw data without formatting
```python
raw('Plain text content')
raw('<h1>HTML content</h1>')
```

#### `stack(id=None)`
Display current call stack with local variables
```python
def process_data():
    result = calculate_something()
    stack()  # Shows current call stack with local variables
```

#### `clear()`
Clear all visualizations
```python
clear()
```

#### `wait()`
Wait for data to be displayed (prevents script from exiting)
```python
log('Processing complete')
wait()  # Script will pause until data is viewed in browser
```

#### `show_url()`
Display the server URL
```python
show_url()
# Shellviz running on http://127.0.0.1:5544
```

#### `show_qr_code()`
Display QR code for mobile access (requires `qrcode` package)
```python
show_qr_code()
#  ██████████████  ██        ████      ██████████████
#  ██          ██  ██  ████████████    ██          ██
#  ██  ██████  ██  ██  ██  ████  ████  ██  ██████  ██
#  ... QR code continues ...
```

## Configuration

### Environment Variables
Configure Shellviz via environment variables:
```bash
# Set port to 8080
export SHELLVIZ_PORT=8080

# Disable URL display on startup
export SHELLVIZ_SHOW_URL=false

# Use a custom URL
export SHELLVIZ_URL="https://my-remote-shellviz.com"

# Run your Python script
python my_script.py
```

### Constructor Parameters
Override settings directly in code:
```python
from shellviz import Shellviz

# Custom configuration
sv = Shellviz(
    port=9000, 
    show_url=False,
    url="https://my-server.com"
)

sv.log('Custom configuration message')
```

### Django Settings
If you're using Django, add these to your `settings.py`:
```python
# settings.py
SHELLVIZ_PORT = 8080
SHELLVIZ_SHOW_URL = False
SHELLVIZ_URL = "https://my-custom-domain.com"
```

### Configuration Hierarchy
Settings are resolved in this priority order:
1. **Constructor parameters** (highest priority)
2. **Django Settings** (if Django is available and configured)  
3. **Environment Variables**
4. **Default Values** (show_url: True, port: 5544, url: None)

### Available Options
- `SHELLVIZ_PORT` - Port number (default: 5544)
- `SHELLVIZ_SHOW_URL` - Show URL on startup (default: True)
- `SHELLVIZ_URL` - Custom server URL (overrides port-based URL)

### Boolean Values
For boolean environment variables, these values are considered `true`:
- `true`, `1`, `yes`, `on`

All other values are considered `false`.

### Accessing Configuration Values
```python
from shellviz.config import SHELLVIZ_PORT, SHELLVIZ_SHOW_URL, SHELLVIZ_URL

# These will be None if not set via Django/env vars
print(SHELLVIZ_PORT)      # e.g., 8080 or None
print(SHELLVIZ_SHOW_URL)  # e.g., False or None  
print(SHELLVIZ_URL)       # e.g., "https://my-server.com" or None
```

### Configuration Troubleshooting

#### Common Issues
- **Environment variables not loaded**: Verify variable names (must be `SHELLVIZ_*`) and restart your application
- **Boolean values not recognized**: Use `true`, `1`, `yes`, or `on` (case-sensitive)
- **URL connection failed**: Check if the server is running and accessible at the specified URL
- **Port conflicts**: Try a different port number if 5544 is already in use
- **Django settings not recognized**: Ensure Django is properly configured and settings are loaded

#### Debugging Configuration
Check your current configuration:
```python
from shellviz import Shellviz
import os

sv = Shellviz()
print(f"Using port: {sv.port}")
print(f"Using URL: {sv.base_url}")
print(f"Show URL on start: {sv.show_url_on_start}")

# Verify environment variables
print("Environment variables:")
print(f"SHELLVIZ_PORT: {os.getenv('SHELLVIZ_PORT')}")
print(f"SHELLVIZ_SHOW_URL: {os.getenv('SHELLVIZ_SHOW_URL')}")
print(f"SHELLVIZ_URL: {os.getenv('SHELLVIZ_URL')}")

# Check Django settings (if using Django)
try:
    from django.conf import settings
    print("Django settings:")
    print(f"SHELLVIZ_PORT: {getattr(settings, 'SHELLVIZ_PORT', 'Not set')}")
    print(f"SHELLVIZ_SHOW_URL: {getattr(settings, 'SHELLVIZ_SHOW_URL', 'Not set')}")
    print(f"SHELLVIZ_URL: {getattr(settings, 'SHELLVIZ_URL', 'Not set')}")
except ImportError:
    print("Django not available")
```

## Advanced Usage

### Multiple Instances
```python
from shellviz import Shellviz

sv1 = Shellviz(port=5000)
sv2 = Shellviz(port=6000)

sv1.log('sending to the first server')
sv2.log('sending to the second server')
```

### Remote Server Connection
```python
from shellviz import Shellviz

# Connect to remote Shellviz instance
sv = Shellviz(url="https://shellviz.mycompany.com")
sv.log("Data from remote client")
```

### Configuration Examples

#### Development vs Production
```python
import os
from shellviz import Shellviz

# Environment-based configuration
if os.getenv('ENVIRONMENT') == 'production':
    sv = Shellviz(
        port=8080,
        show_url=False,
        url="https://viz.myapp.com"
    )
else:
    sv = Shellviz(
        port=5544,
        show_url=True  # Show URL for easy access in development
    )
```

#### Docker Configuration
```dockerfile
# Dockerfile
ENV SHELLVIZ_PORT=8080
ENV SHELLVIZ_SHOW_URL=false
ENV SHELLVIZ_URL="http://shellviz.internal:8080"
```

#### Kubernetes Configuration
```yaml
apiVersion: v1
kind: ConfigMap
metadata:
  name: shellviz-config
data:
  SHELLVIZ_PORT: "8080"
  SHELLVIZ_SHOW_URL: "false"
  SHELLVIZ_URL: "https://shellviz.myapp.com"
---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: my-app
spec:
  template:
    spec:
      containers:
      - name: app
        envFrom:
        - configMapRef:
            name: shellviz-config
```

## Django Integration

### QuerySets and Models
Shellviz can automatically encode Django QuerySet and Model instances:
```python
from shellviz import json, card
from myapp.models import User

# Display a model instance
json(request.user, id='current_user')

# Display a queryset
card(User.objects.all(), id='all_users')
table(User.objects.filter(is_active=True), id='active_users')
```

### Django Logging Handler
Add Shellviz as a logging handler:
```python
# settings.py
LOGGING = {
    'version': 1,
    'disable_existing_loggers': False,
    'handlers': {
        'shellviz': {
            'class': 'shellviz.django.logging.ShellvizHandler',
            'level': 'INFO',
        },
    },
    'loggers': {
        'myapp': {
            'handlers': ['shellviz'],
            'level': 'INFO',
            'propagate': True,
        },
    },
}

# In your code
import logging
logger = logging.getLogger('myapp')
logger.info('This will appear in Shellviz')
```

### Django Debug Toolbar Integration
Add Shellviz as a debug toolbar panel:
```python
# settings.py
if DEBUG:
    DEBUG_TOOLBAR_PANELS = [
        'debug_toolbar.panels.history.HistoryPanel',
        'debug_toolbar.panels.versions.VersionsPanel',
        'debug_toolbar.panels.timer.TimerPanel',
        'shellviz.django.django_debug_toolbar.ShellvizPanel',  # Add this
        # ... other panels
    ]
```

## Data Analysis Examples

### Progress Tracking
```python
import time
from shellviz import progress, log

total_items = 1000
for i in range(total_items):
    # Process item
    process_item(i)
    
    # Update progress
    if i % 10 == 0:  # Update every 10 items
        progress(i / total_items, id='processing')
        log(f'Processed {i}/{total_items} items', id='status')

progress(1.0, id='processing')
log('Processing complete!', id='status')
```

### Data Monitoring
```python
import psutil
import time
from shellviz import number, bar, log

while True:
    # System metrics
    number(psutil.cpu_percent(), id='cpu_usage')
    number(psutil.virtual_memory().percent, id='memory_usage')
    
    # Disk usage by partition
    disk_data = []
    for partition in psutil.disk_partitions():
        try:
            usage = psutil.disk_usage(partition.mountpoint)
            disk_data.append({
                'name': partition.device,
                'value': usage.percent
            })
        except PermissionError:
            continue
    
    bar(disk_data, id='disk_usage')
    log(f'System check at {time.strftime("%H:%M:%S")}', id='monitoring')
    
    time.sleep(5)
```

### API Response Analysis
```python
import requests
from shellviz import json, table, card

response = requests.get('https://api.example.com/users')
data = response.json()

# Show raw response
json(data, id='api_response')

# Extract and show user table
if 'users' in data:
    user_table = []
    for user in data['users']:
        user_table.append([user['name'], user['email'], user['created_at']])
    
    table([['Name', 'Email', 'Created']] + user_table, id='users')

# Show summary stats
card({
    'total_users': len(data.get('users', [])),
    'response_time': f'{response.elapsed.total_seconds():.2f}s',
    'status_code': response.status_code
}, id='summary')
```

## Error Handling

```python
try:
    result = risky_operation()
    log('Success:', result)
except Exception as e:
    log('Error occurred:', str(e), id='errors')
    stack()  # Show call stack for debugging
```

## Command Line Interface

Shellviz also provides a CLI tool:
```bash
# Start a standalone server
shellviz

# Start on custom port
shellviz --port 8080
```