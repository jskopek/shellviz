---
title: JavaScript Library
---

The Shellviz JavaScript library provides powerful data visualization capabilities for both **Node.js** and **browser** environments. With identical APIs across platforms, you can easily visualize data from server-side scripts, web applications, or directly in the browser.

## Installation

### Node.js
```bash
npm install shellviz
```

### Browser (CDN)
```html
<script src="https://unpkg.com/shellviz@0.5.0-beta.0"></script>
```

<Note type='warning'>The @0.5.0-beta.0 modifier can be removed once version 0.5 is released</Note>

### Browser (ES Modules)
```html
<script type="module">
import { log, table, show } from 'https://unpkg.com/shellviz@0.5.0-beta.0/dist/browser.mjs';
</script>
```

## Quick Start

### Node.js Usage
```javascript
import { log, table, json } from 'shellviz';

// Start logging data
log('Hello from Node.js!');
// Shellviz serving on http://127.0.0.1:5544

// Display tabular data
table([
    ['Name', 'Age', 'City'],
    ['Alice', 30, 'New York'],
    ['Bob', 25, 'San Francisco']
]);

// Show JSON data
json({ 
    message: 'Welcome to Shellviz',
    timestamp: new Date().toISOString(),
    data: [1, 2, 3, 4, 5]
});
```

### Browser Usage
```html
<!DOCTYPE html>
<html>
<head>
    <title>Shellviz Browser Example</title>
</head>
<body>
    <script src="https://unpkg.com/shellviz"></script>
    <script>
        const { log, table, show } = shellviz;
        
        // Show the floating widget
        show();
        
        // Send data to visualization
        log('Hello from the browser!');
        table([['Name', 'Value'], ['Test', 123]]);
    </script>
</body>
</html>
```

## Core Functions

### Data Visualization Functions

#### `log(...data, options)`
Display log messages with timestamps
```javascript
log('Simple message');
log('Error occurred:', error, { id: 'errors' });
log('Multiple', 'values', 'supported');
```

#### `table(data, id?, append?)`
Display tabular data
```javascript
// Simple table
table([['Name', 'Age'], ['Alice', 30], ['Bob', 25]]);

// Single row (automatically wrapped)
table(['Alice', 30, 'Engineer']);

// Update existing table
table([['Charlie', 28]], 'users', true); // append=true
```

#### `json(data, id?, append?)`
Display JSON data with interactive explorer
```javascript
json({ user: 'alice', preferences: { theme: 'dark' } });
json([1, 2, 3, 4, 5]);
json({ timestamp: Date.now() }, 'status');
```

#### `markdown(text, id?, append?)`
Render markdown content
```javascript
markdown('# Welcome to Shellviz\n\nThis is **bold** text.');
markdown('## Status\n- Task 1: ✅ Complete\n- Task 2: ⏳ In Progress');
```

#### `progress(value, id?, append?)`
Show progress bars (0.0 to 1.0)
```javascript
progress(0.5, 'migration');
progress(0.75, 'upload');
```

#### `number(value, id?, append?)`
Display large numbers with formatting
```javascript
number(42);
number(1337, 'score');
number(999999, 'total_users');
```

#### `card(data, id?, append?)`
Display card-style information
```javascript
card({ title: 'Server Status', value: 'Online', color: 'green' });
card('Quick info message');
```

### Chart Functions

#### `bar(data, id?, append?)`
Create bar charts
```javascript
bar([
    { name: 'Jan', value: 100 },
    { name: 'Feb', value: 150 },
    { name: 'Mar', value: 200 }
]);
```

#### `area(data, id?, append?)`
Create area charts
```javascript
area([
    { x: '2024-01', y: 100 },
    { x: '2024-02', y: 150 },
    { x: '2024-03', y: 200 }
]);
```

#### `pie(data, id?, append?)`
Create pie charts
```javascript
pie([
    { name: 'Desktop', value: 45 },
    { name: 'Mobile', value: 35 },
    { name: 'Tablet', value: 20 }
]);
```

### Utility Functions

#### `location(coordinates, id?, append?)`
Display location data on maps
```javascript
location({ lat: 40.7128, lng: -74.0060, name: 'New York City' });
location([
    { lat: 37.7749, lng: -122.4194, name: 'San Francisco' },
    { lat: 34.0522, lng: -118.2437, name: 'Los Angeles' }
]);
```

#### `raw(data, id?, append?)`
Display raw data without formatting
```javascript
raw('Plain text content');
raw('<h1>HTML content</h1>');
```

#### `stack(locals?, id?)`
Display current call stack with local variables
```javascript
function processData() {
    const result = calculateSomething();
    stack({ result, timestamp: Date.now() });
}
```

#### `clear()`
Clear all visualizations
```javascript
clear();
```

#### `wait()`
Wait for data to be displayed (useful for scripts)
```javascript
log('Processing...');
await wait();
```

## Configuration

### Environment Variables (Node.js)
Configure Shellviz via environment variables:
```bash
# Set port to 8080
export SHELLVIZ_PORT=8080

# Disable URL display on startup
export SHELLVIZ_SHOW_URL=false

# Use a custom URL
export SHELLVIZ_URL="https://my-remote-shellviz.com"

# Run your script
node my-script.js
```

### Constructor Parameters
Override settings directly in code:
```javascript
import { ShellvizClient } from 'shellviz';

const client = new ShellvizClient({
    port: 9000,
    url: "https://my-server.com"
});

client.log('Custom configuration message');
```

### Configuration Hierarchy
Settings are resolved in this priority order:
1. **Constructor parameters** (highest priority)
2. **Environment Variables** (`process.env.SHELLVIZ_*`)
3. **Default Values** (port: 5544, showUrl: true)

### Available Options
- `SHELLVIZ_PORT` - Port number (default: 5544)
- `SHELLVIZ_SHOW_URL` - Show URL on startup (default: true)
- `SHELLVIZ_URL` - Custom server URL (overrides port-based URL)

### Boolean Values
For boolean environment variables, these values are considered `true`:
- `true` (boolean), `"true"` (string)
- `"1"` (string), `"yes"` (string)

All other values are considered `false`.

## Advanced Usage

### Server Mode (Node.js only)
Create a standalone Shellviz server:
```javascript
import ShellvizServer from 'shellviz/server';

const server = new ShellvizServer({ 
    port: 8080, 
    showUrl: true 
});
```

### Multiple Instances
```javascript
import { ShellvizClient } from 'shellviz';

const analytics = new ShellvizClient({ port: 5544 });
const debug = new ShellvizClient({ port: 5545 });

analytics.table(analyticsData, 'metrics');
debug.log('Debug information');
```

### Remote Server Connection
```javascript
import { ShellvizClient } from 'shellviz';

// Connect to remote Shellviz instance
const client = new ShellvizClient({
    url: "https://shellviz.mycompany.com"
});
client.log("Data from remote client");
```

### Configuration Examples

#### Development vs Production
```javascript
// config.js
const config = {
    development: {
        port: 5544,
        showUrl: true,
        url: null
    },
    production: {
        port: 8080,
        showUrl: false,
        url: "https://viz.myapp.com"
    }
};

const env = process.env.NODE_ENV || 'development';
const shellvizConfig = config[env];

const sv = new ShellvizClient(shellvizConfig);
```

#### Docker Configuration
```dockerfile
# Dockerfile
ENV SHELLVIZ_PORT=8080
ENV SHELLVIZ_SHOW_URL=false
ENV SHELLVIZ_URL="http://shellviz.internal:8080"
```

### Accessing Configuration Values
```javascript
import { SHELLVIZ_PORT, SHELLVIZ_SHOW_URL, SHELLVIZ_URL } from 'shellviz/config';

// These will be null if not set via process.env
console.log(SHELLVIZ_PORT);      // e.g., 8080 or null
console.log(SHELLVIZ_SHOW_URL);  // e.g., false or null  
console.log(SHELLVIZ_URL);       // e.g., "https://my-server.com" or null
```

### Configuration Troubleshooting

#### Common Issues
- **Environment variables not loaded**: Verify variable names (must be `SHELLVIZ_*`) and restart your application
- **Boolean values not recognized**: Use `"true"`/`"false"` strings or boolean values
- **URL connection failed**: Check if the server is running and accessible at the specified URL
- **Port conflicts**: Try a different port number if 5544 is already in use

#### Debugging Configuration
Check your current configuration:
```javascript
import { ShellvizClient } from 'shellviz';

const client = new ShellvizClient();
console.log(`Using port: ${client.port}`);
console.log(`Using URL: ${client.baseUrl}`);

// Verify environment variables
console.log('Environment:', {
    SHELLVIZ_PORT: process.env.SHELLVIZ_PORT,
    SHELLVIZ_SHOW_URL: process.env.SHELLVIZ_SHOW_URL,
    SHELLVIZ_URL: process.env.SHELLVIZ_URL
});
```

## Browser-Specific Features

### Widget Display
Show the floating visualization widget:
```javascript
import { show } from 'shellviz';
show();
```

### No Server Required
In browser environments, Shellviz can work entirely client-side without needing a separate server:
```javascript
// This works entirely in the browser
log('Client-side logging');
table([['Browser', 'Version'], ['Chrome', '91']]);
```

## Error Handling

```javascript
try {
    // Your data processing
    const result = processData();
    log('Success:', result);
} catch (error) {
    log('Error occurred:', error.message, { id: 'errors' });
    stack(); // Show call stack
}
```

## TypeScript Support

The library includes TypeScript definitions:
```typescript
import { log, table, ShellvizClient } from 'shellviz';

interface UserData {
    name: string;
    age: number;
}

const users: UserData[] = [
    { name: 'Alice', age: 30 },
    { name: 'Bob', age: 25 }
];

table(users.map(u => [u.name, u.age]));
```